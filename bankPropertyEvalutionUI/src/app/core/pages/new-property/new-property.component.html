<div class="container" style="background-color: rgba(0, 0, 0, 0.05);">
    <form (ngSubmit)="onSubmit()">
        <p class="heading">New Property Valuation</p>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Initiator's Details</span>
            <br>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="initiatorName">Initiator Name</label>
                        <input type="text" class="form-control" placeholder="Initiator Name" id="initiatorName"
                            [value]="initiatorDetails?.initiatorName" disabled>
                    </div>
                    <div class="col">
                        <label for="initiatorBusinessUnit">Initiator Business Unit</label>
                        <input type="text" class="form-control" placeholder="Initiator Business Unit"
                            id="initiatorBusinessUnit" [value]="initiatorDetails?.initiatorBusinessUnit" disabled>
                    </div>
                    <div class="col">
                        <label for="initiatorContactNo">Initiator Contact Number</label>
                        <input type="tel" class="form-control" placeholder="Contact No" id="initiatorContactNo"
                            [value]="initiatorDetails?.initiatorContactNo" name="initiatorContactNo" minlength="10"
                            maxlength="10" required>
                    </div>
                </div>
            </form>
        </div>
        <br>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Facility Details</span>
            <br>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="typeOfFacility">Type of facility</label>
                        <select id="typeOfFacility" class="form-control"
                            [(ngModel)]="requestInput.facilityDetails.typeOfFacility" name="typeOfFacility">
                            <option value="Non-Revolving" selected>Non-Revolving</option>
                            <option value="Revolving">Revolving</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="category">Category</label>
                        <select id="category" class="form-control" [(ngModel)]="requestInput.facilityDetails.category"
                            name="category">
                            <option selected>25000- Apartment</option>
                            <option>25010- PBWM Housing</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="purpose">Purpose</label>
                        <select id="purpose" class="form-control" [(ngModel)]="requestInput.facilityDetails.purpose"
                            name="purpose">
                            <option selected>Reparation</option>
                            <option>Inheritance</option>
                            <option>Construction</option>
                        </select>
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col">
                        <label for="termInMonths">Term</label>
                        <input type="number" class="form-control" placeholder="Term" name="termInMonths"
                            id="termInMonths" [(ngModel)]="requestInput.facilityDetails.termInMonths" min="0">

                    </div>
                    <div class="col">
                        <label for="currency">CCY</label>
                        <select id="currency" class="form-control" [(ngModel)]="requestInput.facilityDetails.currency"
                            name="currency">
                            <option selected>MUR</option>
                            <option>EUR</option>
                            <option>USD</option>
                            <option>GBP</option>
                            <option>ZAR</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="amount">Amount</label>
                        <input id="amount" type="number" class="form-control" placeholder="Amount"
                            [(ngModel)]="requestInput.facilityDetails.amount" name="amount">
                    </div>
                    <div class="col mt-4">
                        <input class="form-check-input" type="checkbox" value="" id="housingLoan">
                        <label class="form-check-label" for="housingLoan">
                            &nbsp;Housing Loan
                        </label>
                    </div>
                </div>
            </form>
        </div>
        <br>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Property Valuation</span>
            <br>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="typeOfEvaluation">Type Of Evaluation</label>
                        <select id="typeOfEvaluation" class="form-control"
                            [(ngModel)]="requestInput.propertyValuation.typeOfEvaluation" name="typeOfEvaluation">
                            <option selected>New</option>
                            <option>Existing</option>\
                        </select>
                    </div>
                    <div class="col">
                        <label for="fosReference">FOS Ref No</label>
                        <input id="fosReference" type="text" class="form-control" placeholder="Last name"
                            [(ngModel)]="requestInput.propertyValuation.fosReference" name="fosReference">
                    </div>
                </div>
            </form>
        </div>
        <br>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Borrower Details</span>
            <br>
            <span class="m-3">Main Borrower</span>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="mainCustomerName">Customer Name</label>
                        <input type="text" class="form-control" placeholder="Enter Customer Name" id="mainCustomerName"
                            [(ngModel)]="requestInput.borrowerDetails.mainBorrower.customerName" name="mainCustomerName"
                            required>
                    </div>
                    <div class="col">
                        <label for="mainCustomerName">Customer Number</label>
                        <input id="mainCustomerName" type="number" class="form-control"
                            placeholder="Enter Customer Number"
                            [(ngModel)]="requestInput.borrowerDetails.mainBorrower.customerNumber"
                            name="mainCustomerName">
                    </div>
                    <div class="col">
                        <label for="mainAddress">Address</label>
                        <input id="mainAddress" type="text" class="form-control" placeholder="Enter Address"
                            [(ngModel)]="requestInput.borrowerDetails.mainBorrower.address" name="mainAddress">
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col">
                        <label for="contactNumber">Contact No.</label>
                        <input id="contactNumber" type="number" class="form-control" placeholder="Last name"
                            [(ngModel)]="requestInput.borrowerDetails.mainBorrower.contactNumber" name="contactNumber"
                            minlength="10" maxlength="10">
                    </div>
                    <div class="col">
                        <label for="mainEmail">Email</label>
                        <input id="mainEmail" type="email" class="form-control" placeholder="Last name"
                            [(ngModel)]="requestInput.borrowerDetails.mainBorrower.email" name="mainEmail">
                    </div>
                </div>
            </form>
            <span class="m-3">Joint Borrower</span>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="jointCustomerName">Customer Name</label>
                        <input type="text" class="form-control" placeholder="Enter Name" id="jointCustomerName"
                            [(ngModel)]="requestInput.borrowerDetails.jointBorrowers.customerName"
                            name="jointCustomerName">
                    </div>
                    <div class="col">
                        <label for="jointCustomerNumber">Customer Number</label>
                        <input type="number" class="form-control" placeholder="Enter Contact Number"
                            id="jointCustomerNumber"
                            [(ngModel)]="requestInput.borrowerDetails.jointBorrowers.customerNumber"
                            name="jointCustomerNumber">
                    </div>
                    <div class="col">
                        <label for="jointAddress">Address</label>
                        <input type="text" class="form-control" placeholder="Enter Address" id="jointAddress"
                            [(ngModel)]="requestInput.borrowerDetails.jointBorrowers.address" name="jointAddress">
                    </div>
                </div>
                <div class="row py-2">
                    <div class="col">
                        <label for="jointContatcNumber">Contact No.</label>
                        <input type="number" class="form-control" placeholder="Last name" id="jointContatcNumber"
                            [(ngModel)]="requestInput.borrowerDetails.jointBorrowers.contactNumber"
                            name="jointContatcNumber" minlength="10" maxlength="10">
                    </div>
                    <div class="col">
                        <label for="jointEmail">Email</label>
                        <input type="email" class="form-control" placeholder="Last name" id="jointEmail"
                            [(ngModel)]="requestInput.borrowerDetails.jointBorrowers.email" name="jointEmail">
                    </div>
                </div>
            </form>
        </div>
        <br>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Comments</span>
            <br>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="comment">Comment</label>
                        <input id="comment" type="text" class="form-control" placeholder="Enter Comment"
                            [(ngModel)]="requestInput.comment" name="comment">
                    </div>
                </div>
            </form>
            <div class="container" style="margin-top: 20px !important;">
                <p>Previous Comments</p>
                <table mat-table [dataSource]="commentTableDataSource" class="mat-elevation-z8">
                    <!-- Position Column -->
                    <ng-container matColumnDef="date">
                        <th mat-header-cell *matHeaderCellDef> Date </th>
                        <td mat-cell *matCellDef="let element"> {{ formatDate(element.date) }} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="initiatorBusinessUnit">
                        <th mat-header-cell *matHeaderCellDef> User </th>
                        <td mat-cell *matCellDef="let element"> {{element.initiatorBusinessUnit}} </td>
                    </ng-container>

                    <!-- Name Column -->
                    <ng-container matColumnDef="comment">
                        <th mat-header-cell *matHeaderCellDef> Comments </th>
                        <td mat-cell *matCellDef="let element"> {{ element.comment}} </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>
        </div>
        <br>
        <div class="container-box py-3 px-2">
            <span class="subHeading">Upload Section</span>
            <br>
            <form>
                <div class="row py-2">
                    <div class="col">
                        <label for="comment">Document Type</label>
                        <select id="typeOfEvaluation" class="form-control" [(ngModel)]="selectedDocumentType"
                            name="typeOfEvaluation">
                            <option selected>Deed</option>
                            <option>Site and Location plan</option>
                            <option>National ID card</option>
                            <option>Quatation</option>
                            <option>Birth certificate</option>
                            <option>Building permits</option>
                            <option>Marriage certificate</option>
                            <option>Letter of Intent</option>
                        </select>
                    </div>
                    <div class="col">
                        <label for="fosReference">Uploaded Documents</label>
                        <table mat-table [dataSource]="documentTableDataSource" class="mat-elevation-z8">
                            <!-- Position Column -->
                            <ng-container matColumnDef="docType">
                                <th mat-header-cell *matHeaderCellDef> Doc Type </th>
                                <td mat-cell *matCellDef="let element"> {{ element.docType }} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="fileName">
                                <th mat-header-cell *matHeaderCellDef> File Name </th>
                                <td mat-cell *matCellDef="let element"> {{element.fileName}} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="size">
                                <th mat-header-cell *matHeaderCellDef> Size </th>
                                <td mat-cell *matCellDef="let element"> {{ element.size}} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="uploadedBy">
                                <th mat-header-cell *matHeaderCellDef> Uploaded By </th>
                                <td mat-cell *matCellDef="let element"> {{ element.uploadedBy}} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="uploadedOn">
                                <th mat-header-cell *matHeaderCellDef> Uploaded On </th>
                                <td mat-cell *matCellDef="let element"> {{ formatDate(element.uploadedOn) }} </td>
                            </ng-container>

                            <!-- Name Column -->
                            <ng-container matColumnDef="deletteFile">
                                <th mat-header-cell *matHeaderCellDef></th>
                                <td mat-cell *matCellDef="let element">
                                    <button class="btn btn-secondary" style="color: red; background-color: white;"
                                        (click)="deleteFile(element.fileName)">
                                        <i class="bi bi-trash"></i>
                                    </button>
                                </td>
                            </ng-container>
                            <tr mat-header-row *matHeaderRowDef="displayedColumnsDocTable"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsDocTable;"></tr>
                        </table>
                    </div>
                </div>
                @if(selectedDocumentType) {
                <div class="row py-2">
                    <div class="col">
                        <app-file-drop (fileDetails)="onFileDetails($event)"></app-file-drop>
                    </div>
                    <div class="col">
                    </div>
                </div>
                }
            </form>
        </div>
        <Br>
        <button type="submit">Submit</button>
    </form>
    <br>
</div>